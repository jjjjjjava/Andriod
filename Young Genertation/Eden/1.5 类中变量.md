[toc]

## 精简版

1. 局部变量是在类的方法中，对于类的每个对象，其每次调用方法，都会创建对应的局部变量。
2. 实例变量是类的一个属性，对于类的每个对象，都有一个。
3. 类变量是类中的一个静态属性，对于类的所有对象是全局唯一的。

因此：

类的数据存放在方法区中，类的对象实例存放在堆上，同理：

1. 全局唯一的类的静态变量和类的数据一起存放在方法区中
2. 而伴随类的对象实例而存在的类的实例变量则存放在堆中。
3. 与此同时，随着方法调用而产生的变量则是存放在栈帧中的局部变量表中





## 类中变量

其实：局部变量是在类的方法中，对于类的每个对象，其每次调用方法，都会创建对应的局部变量。实例变量是类的一个成员，对于类的每个对象，都有一个。类变量是类中的一个静态成员，对于类的所有对象是全局唯一的。



我懂了，类的数据存放在方法区中，类的对象实例存放在堆上，同理，全局唯一的类的静态变量和类的数据一起存放在方法区中，而伴随类的对象实例而存在的类的实例变量则存放在堆中。与此同时，随着方法调用而产生的变量则是存放在栈帧中的局部变量表中

### 类变量（静态变量）

- **定义**：用`static`关键字定义，在类级别上共享，与类的任何实例无关。
- **存储**：存储在方法区中，由类的所有实例共享。
- **生命周期**：从类被加载开始，到类被卸载或JVM停止运行结束。
- **用途**：适用于类级别的共享数据，例如，计数所有实例的数量或定义全局常量。

### 实例变量

- **定义**：每个类实例具有自己的实例变量副本。
- **存储**：存储在堆内存中，作为对象的一部分。
- **生命周期**：当对象被创建时初始化，直到对象被垃圾回收。
- **用途**：适用于需要在对象之间独立维护的数据，例如，每个汽车对象的颜色或所有者。

### 局部变量

- **定义**：在方法内部定义，也可以在代码块或循环内定义。
- **存储**：存储在Java虚拟机栈的栈帧中，每次方法或代码块调用时创建。
- **生命周期**：从方法或代码块开始执行时创建，到方法或代码块执行完成时结束。
- **用途**：适用于临时存储计算中间结果，或在方法或代码块内部控制流程。





### 示例：Java类定义及其使用

```java
public class Car {
    // 类变量（静态变量）
    public static int wheels = 4;

    // 实例变量
    private String color;

    // 构造方法
    public Car(String color) {
        this.color = color;  // 初始化实例变量
    }

    public void printDetails() {
        // 局部变量
        String message = "A " + color + " car with " + wheels + " wheels.";
        System.out.println(message);
    }

    public static void main(String[] args) {
        // 创建Car对象的实例
        Car myCar = new Car("Red");
        myCar.printDetails();  // 调用实例方法
    }
}
```

### 分析

1. **类变量（静态变量）**：
   - **定义**：在`Car`类中，`wheels`是一个类变量，使用`static`关键字修饰。类变量与类本身关联，而不是与类的某个实例关联。
   - **存储**：类变量存储在方法区，并在类首次加载时初始化。
   - **特点**：所有的`Car`实例共享同一个`wheels`变量。改变`wheels`的值会影响所有实例。
2. **实例变量**：
   - **定义**：`color`是一个实例变量，每个`Car`对象都有自己的`color`副本。
   - **存储**：实例变量存储在堆内存中，作为对象的一部分。
   - **特点**：每个`Car`对象的`color`可以独立于其他对象设定和修改。
3. **局部变量**：
   - **定义**：在`printDetails`方法中，`message`是一个局部变量。
   - **存储**：局部变量存储在Java虚拟机栈的栈帧中，该栈帧是为`printDetails`方法的调用创建的。
   - **特点**：局部变量的作用域限定在声明它的方法中，方法结束时，局部变量会从栈上消失。

### 补充说明

- **类变量**访问：可以通过类名直接访问，如`Car.wheels`，或者通过对象访问，但最好通过类名访问以反映其静态性质。
- **实例变量**访问：必须通过类的对象实例访问，如`myCar.color`。
- **局部变量**：只在定义它的方法或语句块内部可见，不能在方法外部访问。